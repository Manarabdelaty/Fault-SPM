/*
    Automatically generated by Fault
    Do not modify.
    Generated on: 2021-01-29 09:40:43
*/

/* Need to export PDK_ROOT */
`include "libs.ref/sky130_fd_sc_hd/verilog/primitives.v"
`include "libs.ref/sky130_fd_sc_hd/verilog/sky130_fd_sc_hd.v"

`include "dft/1-spm_top.chained.v"

module testbench;
    wire[0:0] \done ;
    reg[0:0] \sin ;
    reg[0:0] \shift ;
    reg[31:0] \mp ;
    reg[0:0] \start ;
    wire[63:0] \prod ;
    reg[0:0] \test ;
    reg[0:0] \rst ;
    reg[31:0] \mc ;
    wire[0:0] \sout ;
    reg[0:0] \tck ;
    reg[0:0] \clk ;

        always #1 clk = ~clk; 
        always #1 tck = ~tck; 

    spm_top uut(
        .\done ( \done ) , .\sin ( \sin ) , .\shift ( \shift ) , .\mp ( \mp ) , .\start ( \start ) , .\prod ( \prod ) , .\test ( \test ) , .\rst ( \rst ) , .\mc ( \mc ) , .\sout ( \sout ) , .\tck ( \tck ) , .\clk ( \clk ) 
    ); 

    wire[331:0] serializable =
        332'b00001010101011100010110100011000010001010000011010100111111011010000111100100011101110011010010100111000100001111000001100111110001011011010111011100101100000111111100001111111101010101110100010100111100001110010111111100101110100111111110001010011011010011110111011011000000000111010100111101011011111101011110100101000010001011000;
    reg[331:0] serial;
    integer i;
    initial begin
        // $dumpfile("chain.vcd");
        // $dumpvars(0, testbench);
        \mc = 0 ;
        \mp = 0 ;
        \clk = 0 ;
        \rst = 1 ;
        \start = 0 ;
        \sin = 0 ;
        \shift = 0 ;
        \tck = 0 ;
        \test = 0 ;

        #10;
        rst = ~rst;
        shift = 1;
        test = 1;
        for (i = 0; i < 332; i = i + 1) begin
            sin = serializable[i];
            #2;
        end
        for (i = 0; i < 332; i = i + 1) begin
            serial[i] = sout;
            #2;
        end
        if (serial === serializable) begin
            $display("SUCCESS_STRING");
        end
        $finish;
    end
endmodule
